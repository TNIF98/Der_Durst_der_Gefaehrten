<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Der Durst der Gef√§hrten</title>
    <style>
        :root{--bg:#0f1724;--card:#0b1220;--accent:#ffcc00;--text:#e6eef8}
        html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#071025 0%,#0b1422 100%);color:var(--text);display:flex;align-items:center;justify-content:center}
        .container{width:960px;max-width:96%;padding:28px}
        header{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:18px;gap:12px}
        h1{font-size:28px;margin:0;color:var(--accent)}
        .controls{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
        button{background:var(--card);color:var(--text);border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:8px;cursor:pointer;font-size:13px}
        button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06)}

        .board{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;background:rgba(255,255,255,0.02);padding:12px;border-radius:12px}
        .cell{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));min-height:86px;display:flex;align-items:center;justify-content:center;border-radius:8px;position:relative;user-select:none;cursor:pointer;font-size:14px;padding:8px;text-align:center}
        .cell .content{pointer-events:none;font-size:11px;line-height:1.2}
        .cell.marked::after{content:'X';position:absolute;inset:6px;display:flex;align-items:center;justify-content:center;font-size:48px;color:var(--accent);font-weight:800}

        .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);z-index:40;visibility:hidden;opacity:0;transition:opacity .2s}
        .overlay.show{visibility:visible;opacity:1}
        .bingoCard{background:var(--card);padding:36px 48px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,0.6);text-align:center;max-width:90vw}
        .bingoCard h2{margin:0;font-size:72px;letter-spacing:6px;color:var(--accent)}
        .bingoCard p{margin-top:8px;color:#cfe6ff;font-size:14px}

        .toast-container{position:relative;height:80px;margin:20px 0}
        .toast-animation{display:none;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}
        .toast-animation.show{display:flex;justify-content:center;align-items:flex-end;gap:20px}
        
        .beer{font-size:60px;animation:beerClink 0.8s ease-in-out}
        .aperol{font-size:60px;animation:aperolClink 0.8s ease-in-out}
        
        @keyframes beerClink{
            0%{transform:translateX(0) rotateZ(0deg);opacity:1}
            50%{transform:translateX(-15px) rotateZ(-15deg);opacity:1}
            100%{transform:translateX(0) rotateZ(0deg);opacity:1}
        }
        @keyframes aperolClink{
            0%{transform:translateX(0) rotateZ(0deg);opacity:1}
            50%{transform:translateX(15px) rotateZ(15deg);opacity:1}
            100%{transform:translateX(0) rotateZ(0deg);opacity:1}
        }

        .small{font-size:12px;color:#9fb3d6}
        footer{margin-top:12px;color:#93a9c9;font-size:13px}

        /* --- Getr√§nke-Counter Styling --- */
        .drink-counter{
            margin-top:12px;
            display:flex;
            align-items:center;
            justify-content:center;
            gap:10px;
            flex-wrap:wrap;
            color:#cfe6ff;
        }
        .drink-counter .count{
            min-width:42px;
            text-align:center;
            font-weight:700;
            color:var(--accent);
            background:rgba(255,255,255,0.04);
            border:1px solid rgba(255,255,255,0.06);
            padding:6px 10px;
            border-radius:8px;
        }

        /* Smartphone / Mobile Devices */
        @media (max-width: 768px) {
            .container{padding:12px;width:100%}
            header{margin-bottom:12px;gap:8px}
            h1{font-size:20px}
            .controls{gap:6px}
            button{padding:6px 8px;font-size:12px}
            
            .board{gap:6px;padding:8px}
            .cell{min-height:70px;font-size:11px;padding:6px}
            .cell .content{font-size:10px}
            .cell.marked::after{font-size:36px}
            
            footer{font-size:11px;margin-top:8px}
            .small{font-size:11px}
        }

        @media (max-width: 480px) {
            .container{padding:8px}
            h1{font-size:16px}
            .controls{width:100%;flex-direction:column;gap:4px}
            button{width:100%;padding:5px 6px;font-size:11px}
            
            .board{gap:4px;padding:6px}
            .cell{min-height:60px;font-size:10px;padding:4px}
            .cell .content{font-size:9px}
            .cell.marked::after{font-size:28px}
            
            header{flex-direction:column;align-items:flex-start}
            footer{font-size:10px;margin-top:6px}
            .small{font-size:10px}
            
            .bingoCard{padding:24px 20px}
            .bingoCard h2{font-size:48px;letter-spacing:3px}
            .bingoCard p{font-size:13px}
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Der Durst der Gef√§hrten</h1>
            <div class="controls">
                <button id="clearBtn" class="secondary">Markierungen zur√ºcksetzen</button>
            </div>
        </header>

        <main>
            <div id="board" class="board" aria-label="Bingo Spielfeld"></div>

            <!-- >>> Getr√§nke-Counter unter dem Bingo-Feld <<< -->
            <div class="drink-counter" aria-live="polite">
                <span>Getr√§nke:</span>
                <span id="drinkCount" class="count">0</span>
                <button id="drinkAddBtn" aria-label="Ein Getr√§nk hinzuf√ºgen">+1 Getr√§nk</button>
            </div>

            <footer>
                <div class="small">Klicke auf ein Feld, um es zu markieren. Klicke nochmal, um die Markierung zu entfernen.</div>
            </footer>
        </main>
    </div>

    <div id="overlay" class="overlay" role="dialog" aria-hidden="true">
        <div class="bingoCard">
            <h2>BINGO!</h2>
            <p>Gl√ºckwunsch ‚Äî du hast 5 in einer Reihe.</p>
            <div class="toast-container">
                <div id="toastAnimation" class="toast-animation">
                    <span class="beer">üç∫</span>
                    <span class="aperol">üçä</span>
                </div>
            </div>
            <div style="margin-top:14px"><button id="drinkBtn">Getr√§nk trinken</button></div>
            <div style="margin-top:8px"><button id="closeOverlay" class="secondary">Weiter spielen</button></div>
        </div>
    </div>

    <script>
        // Pool mit ~50 Beispielen (kann angepasst werden)
        const pool = [
            // Interaktions- / Trink-Challenges
            'Bestelle ein Getr√§nk auf Plattdeutsch',
            'Trinke etwas, das du noch nie probiert hast',
            '√úberrede jemanden, dir ein Getr√§nk auszugeben',
            'Jemand sagt ‚ÄûMoin‚Äú',
            'Spiele eine Runde Dart',
            'Spiele eine Runde Kicker',
            'Schnick-Schnack-Schnuck gegen Fremde gewinnen',
            'Ein Gruppenfoto machen',
            'In einer Kneipe jemanden zum Trinkbuddy erkl√§ren',
            'Auf der Tanzfl√§che tanzen',
            'Den eigenen Namen falsch vorstellen',
            'Lasse eine andere Person dein Getr√§nk aussuchen',
            'Halte einen Toast auf Hamburg oder etwas, das man damit verbindet',
            'Jemand singt ohne Aufforderung mit',
            'Jemand telefoniert laut',
            'Ein 90er-Hit l√§uft',
            'Sirene von Polizei oder Rettungswagen drau√üen',
            'Jemand geht verloren auf dem Weg zur n√§chsten Kneipe',
            'Jemand hat etwas in einer vorherigen Kneipe vergessen',
            'Barkeeper:in wird mit Vornamen von G√§sten angesprochen',
            'Fremde fachsimpeln √ºber Fu√üball',
            'Zwei entdecken denselben Heimatort',

            // Fu√üball / Fanfelder
            'HSV-Logo in der Kneipe entdecken',
            'St.-Pauli-Totenkopf entdecken',
            'Trikot mit Spielernamen sehen',
            'Fu√üballspiel l√§uft auf einem Bildschirm',
            'Einen Vereinsspruch lesen (z. B. Nur der HSV / St. Pauli till I die)',
            'Fan-Aufkleber auf der Toilette entdecken',
            'Stadionbild oder Poster finden',

            // Kneipen-Deko & Atmosph√§re
            'Neon-Leuchtschild entdecken',
            'Ein Spiegel mit Brauerei-Logo',
            'Wand voll mit Fotos entdecken',
            'Kronkorken-Deko entdecken',
            'Maritime Deko (Anker, Rettungsring etc.) sehen',
            'Ein Tisch wackelt'
        ];

        const boardEl = document.getElementById('board');
        const overlay = document.getElementById('overlay');
        const clearBtn = document.getElementById('clearBtn');
        const drinkBtn = document.getElementById('drinkBtn');
        const closeOverlay = document.getElementById('closeOverlay');
        const toastAnimation = document.getElementById('toastAnimation');

        // >>> Elemente f√ºr den Getr√§nke-Counter
        const drinkAddBtn = document.getElementById('drinkAddBtn');
        const drinkCountEl = document.getElementById('drinkCount');

        const SIZE = 5;

        // --- Getr√§nke-Counter Logik ---
        let drinkCount = Number(localStorage.getItem('drinkCount') || 0);

        function renderDrinkCount() {
            drinkCountEl.textContent = String(drinkCount);
            localStorage.setItem('drinkCount', String(drinkCount));
        }

        function addDrink(amount = 1) {
            drinkCount = Math.max(0, drinkCount + amount);
            renderDrinkCount();
        }

        // Erzeuge 5x5 Zellen (anfangs leer)
        function createEmptyBoard() {
            boardEl.innerHTML = '';
            for (let r = 0; r < SIZE; r++) {
                for (let c = 0; c < SIZE; c++) {
                    const idx = r * SIZE + c;
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.index = idx;
                    cell.dataset.row = r;
                    cell.dataset.col = c;
                    const content = document.createElement('div');
                    content.className = 'content';
                    content.textContent = '';
                    cell.appendChild(content);
                    cell.addEventListener('click', onCellClick);
                    boardEl.appendChild(cell);
                }
            }
        }

        function onCellClick(e) {
            const cell = e.currentTarget;
            cell.classList.toggle('marked');
            checkWin();
        }

        function getMarkedMatrix() {
            const marked = Array.from({length: SIZE}, () => Array(SIZE).fill(false));
            document.querySelectorAll('.cell').forEach(c => {
                const r = Number(c.dataset.row);
                const col = Number(c.dataset.col);
                if (c.classList.contains('marked')) marked[r][col] = true;
            });
            return marked;
        }

        function checkWin() {
            const m = getMarkedMatrix();

            // Pr√ºfe Zeilen
            for (let r = 0; r < SIZE; r++) {
                if (m[r].every(Boolean)) return showBingo();
            }

            // Pr√ºfe Spalten
            for (let c = 0; c < SIZE; c++) {
                let ok = true;
                for (let r = 0; r < SIZE; r++) if (!m[r][c]) { ok = false; break; }
                if (ok) return showBingo();
            }

            // Diagonalen
            let diag1 = true, diag2 = true;
            for (let i = 0; i < SIZE; i++) {
                if (!m[i][i]) diag1 = false;
                if (!m[i][SIZE - 1 - i]) diag2 = false;
            }
            if (diag1 || diag2) return showBingo();
        }

        function showBingo(){
            overlay.classList.add('show');
            overlay.setAttribute('aria-hidden','false');
        }

        function hideBingo(){
            overlay.classList.remove('show');
            overlay.setAttribute('aria-hidden','true');
        }

        // F√ºlle zuf√§llig aus dem Pool (einmal pro Feld)
        function fillRandom() {
            const poolCopy = [...pool];
            // Mische Pool
            for (let i = poolCopy.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [poolCopy[i], poolCopy[j]] = [poolCopy[j], poolCopy[i]];
            }
            const cells = document.querySelectorAll('.cell');
            cells.forEach((cell, i) => {
                const txt = poolCopy[i % poolCopy.length] || '';
                cell.querySelector('.content').textContent = txt;
                cell.classList.remove('marked');
            });
        }

        function clearMarks() {
            document.querySelectorAll('.cell').forEach(c => c.classList.remove('marked'));
        }

        function resetBoard() {
            createEmptyBoard();
            fillRandom();
        }

        // Events
        clearBtn.addEventListener('click', () => { clearMarks(); hideBingo(); });

        // Klick auf "Getr√§nk trinken" in der Bingo-Overlay ‚Üí nur Animation
        drinkBtn.addEventListener('click', () => { 
            toastAnimation.classList.add('show');
            setTimeout(() => { toastAnimation.classList.remove('show'); }, 900);
        });

        closeOverlay.addEventListener('click', () => { hideBingo(); });

        // >>> Getr√§nke-Counter Events
        drinkAddBtn.addEventListener('click', () => addDrink(1));

        // Init
        createEmptyBoard();
        fillRandom();
        renderDrinkCount();
    </script>
</body>
</html>
